\startchapter[title={A Calligraphy Grid in ConTeXt/LMTX},reference={a-calligraphy-grid-in-contextlmtx}]

{\bf WARNING: WORK IN PROGRESS! IT MAY NOT WORK! DOCUMENTATION MAY BE INCOMPLETE OR INCORRECT! USE AT YOUR OWN RISK!}

This project is a generator of grids for medieval calligraphy in \goto{ConTeXt/LMTX}[url(https://wiki.contextgarden.net/)] and \goto{MetaPost}[url(https://wiki.contextgarden.net/MetaPost)].

\startsection[title={Files included},reference={files-included}]

\startitemize[packed]
\item
  Main module: \type{tex/context/third/pauta/t-pauta.mkxl}
\item
  Example file: \type{doc/context/third/pauta/pauta-example.tex} (also in pdf)
\item
  A copy of this file in ConTeXt format: \type{doc/context/third/pauta/pauta-example.tex} (also in pdf)
\item
  Environment file for the examples (not needed for Pauta to work): \type{doc/context/third/pauta/env-pauta.tex}
\item
  This \type{README.md} file, and a pandoc generated ConTeXt version at \type{doc/context/third/pauta/README.tex}. It gets regenerated by the \type{build.lua} script on each run using pandoc.
\item
  The build script \type{build.lua}, that takes care of generating the tex version of the README file and all the pdfs.
\stopitemize

\stopsection

\startsection[title={Use},reference={use}]

\startenumerate[n,packed][stopper=.]
\item
  Clone this repository: \type{git clone https://github.com/conradolandia/pauta.git}, and \type{cd} inside it.
\item
  Copy the \type{doc} and \type{tex} folders to your ConTeXt tree and rebuild your database with \type{context --generate}. You can find more details about the process \goto{on the ConTeXt wiki}[url(https://wiki.contextgarden.net/Modules\#Installation)]. Alternatively, call context with the \type{--path} flag, and provide it with the path of this folder, i.e: \type{context --path=/home/user/pauta}. Alternatively still, simply place \type{t-pauta.mkxl} on the same directory as the file importing it.
\item
  Invoke the \type{\Pauta} macro as many times as you want pages. Each invocation can have a different configuration. Each invocation will create one single page.
\item
  The data about the hand\footnote{This a way of saying the {\em font} in fancy calligraphic terms.} is autogenerated by the module and set into the header or the footer, following the user configuration.
\item
  {\bf WARNING:} This module takes over the header and footer areas, and does not reset them. So if your document includes other content on those areas you will need to reset again to your liking by manually invoking \type{\setupheadertexts}/\type{\setupfooterrtexts}. This will be improved in the future.
\stopenumerate

\stopsection

\startsection[title={Generating the example file},reference={generating-the-example-file}]

Review and run the lua script \type{build.lua}. If you don't have a standalone lua interpreter, you can run it with luametatex like so:

\starthighlighting
/BTEX\ExtensionTok{luametatex} \AttributeTok{--luaonly}\NormalTok{ build.lua}/ETEX
\stophighlighting

You can also adapt it and use to build your own projects. \type{build.lua} also lives in its own \goto{repository}[url(https://github.com/conradolandia/build.lua/)].

\stopsection

\startsection[title={Configuration Parameters},reference={configuration-parameters}]

All parameters are optional. Defaults are as follows:

\starthighlighting
/BTEX\FunctionTok{\letterbackslash{}Pauta}\NormalTok{[}/ETEX
/BTEX\NormalTok{ { }hand=, }\CommentTok{\letterpercent{} Hand name. If not defined, will not show info on the right of the header \letterslash{} footer}/ETEX
/BTEX\NormalTok{ { }handInfo=, }\CommentTok{\letterpercent{} Some extra info for the hand. If not defined, will not show info on the right of the header \letterslash{} footer}/ETEX
/BTEX\NormalTok{ { }infoPosition=header, }\CommentTok{\letterpercent{} Where to show the extra info (header \letterbar{} footer)}/ETEX
/BTEX\NormalTok{ { }infoLeft=\letteropenbrace{}}\FunctionTok{\letterbackslash{}setup}\NormalTok{\letteropenbrace{}pauta:content:leftmark\letterclosebrace{}\letterclosebrace{}, }\CommentTok{\letterpercent{} If defined, will override autogenerated hand info on the left of the footer \letterslash{} header}/ETEX
/BTEX\NormalTok{ { }infoRight=\letteropenbrace{}}\FunctionTok{\letterbackslash{}setup}\NormalTok{\letteropenbrace{}pauta:content:rightmark\letterclosebrace{}\letterclosebrace{}, }\CommentTok{\letterpercent{} If defined, will override autogenerated hand info on the right of the footer \letterslash{} header}/ETEX
/BTEX\NormalTok{ { }displayNibs=false, }\CommentTok{\letterpercent{} Show nib-width marks (true \letterbar{} false)}/ETEX
/BTEX\NormalTok{ { }displayAngleMarks=false, }\CommentTok{\letterpercent{} Display dotted guides for the nib angle (true \letterbar{} false)}/ETEX
/BTEX\NormalTok{ { }nibWidth=3mm, }\CommentTok{\letterpercent{} Pen nib width (must include units, or it will default to big points)}/ETEX
/BTEX\NormalTok{ { }nibAngle=35, }\CommentTok{\letterpercent{} Nib working angle in degrees}/ETEX
/BTEX\NormalTok{ { }ascenders=3, }\CommentTok{\letterpercent{} Number of ascender lines (in nib widths)}/ETEX
/BTEX\NormalTok{ { }xHeight=4, }\CommentTok{\letterpercent{} Number of x-height lines (in nib widths)}/ETEX
/BTEX\NormalTok{ { }descenders=3, }\CommentTok{\letterpercent{} Number of descending lines (in nib widths)}/ETEX
/BTEX\NormalTok{ { }adjustment=0, }\CommentTok{\letterpercent{} Sometimes it's necessary to adjust the line height if is longer than TextHeight, still not sure why it happens but it happpens... a value of 1 or 2 should solve it.}/ETEX
/BTEX\NormalTok{ { }mainColor=\letteropenbrace{}s=.4\letterclosebrace{}, }\CommentTok{\letterpercent{} Main color (lines that separate sections)}/ETEX
/BTEX\NormalTok{ { }secondaryColor=\letteropenbrace{}s=.6\letterclosebrace{}, }\CommentTok{\letterpercent{} Secondary color (lines separated by a nib width and dotted angle lines)}/ETEX
/BTEX\NormalTok{ { }tertiaryColor=\letteropenbrace{}s=.8\letterclosebrace{}, }\CommentTok{\letterpercent{} Tertiary color (nib width marks on the left margin)}/ETEX
/BTEX\NormalTok{]}/ETEX
\stophighlighting

\stopsection

\startsection[title={Code Examples},reference={code-examples}]

\startsubsection[title={Example 1: Basic Usage},reference={example-1-basic-usage}]

\starthighlighting
/BTEX\FunctionTok{\letterbackslash{}usemodule}\NormalTok{[pauta]}/ETEX

/BTEX\FunctionTok{\letterbackslash{}startdocument}/ETEX
/BTEX\FunctionTok{\letterbackslash{}Pauta}\NormalTok{[}/ETEX
/BTEX\NormalTok{ { }hand=\letteropenbrace{}Carolingian\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ { }handInfo=\letteropenbrace{}Tours school, VIII}\FunctionTok{\letterbackslash{}high}\NormalTok{\letteropenbrace{}th\letterclosebrace{} century\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ { }infoPosition=header,}/ETEX
/BTEX\NormalTok{ { }displayNibs=true,}/ETEX
/BTEX\NormalTok{ { }displayAngleMarks=true,}/ETEX
/BTEX\NormalTok{ { }nibWidth=3mm,}/ETEX
/BTEX\NormalTok{ { }ascenders=2,}/ETEX
/BTEX\NormalTok{ { }xHeight=3,}/ETEX
/BTEX\NormalTok{ { }descenders=2,}/ETEX
/BTEX\NormalTok{ { }adjustment=0,}/ETEX
/BTEX\NormalTok{ { }mainColor=\letteropenbrace{}s=.6\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ { }secondaryColor=\letteropenbrace{}s=.8\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ { }tertiaryColor=\letteropenbrace{}s=.8\letterclosebrace{},}/ETEX
/BTEX\NormalTok{]}/ETEX
/BTEX\FunctionTok{\letterbackslash{}stopdocument}/ETEX
\stophighlighting

\stopsubsection

\startsubsection[title={Example 2: Multiple Pauta Instances},reference={example-2-multiple-pauta-instances}]

\starthighlighting
/BTEX\FunctionTok{\letterbackslash{}usemodule}\NormalTok{[pauta]}/ETEX

/BTEX\FunctionTok{\letterbackslash{}startdocument}/ETEX
/BTEX\FunctionTok{\letterbackslash{}Pauta}\NormalTok{[}/ETEX
/BTEX\NormalTok{ hand=\letteropenbrace{}Carolingian\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ handInfo=\letteropenbrace{}Tours school, VIII}\FunctionTok{\letterbackslash{}high}\NormalTok{\letteropenbrace{}th\letterclosebrace{} century\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ infoPosition=header,}/ETEX
/BTEX\NormalTok{ displayNibs=true,}/ETEX
/BTEX\NormalTok{ displayAngleMarks=true,}/ETEX
/BTEX\NormalTok{ nibWidth=3mm,}/ETEX
/BTEX\NormalTok{ ascenders=2,}/ETEX
/BTEX\NormalTok{ xHeight=3,}/ETEX
/BTEX\NormalTok{ descenders=2,}/ETEX
/BTEX\NormalTok{ adjustment=0,}/ETEX
/BTEX\NormalTok{ mainColor=\letteropenbrace{}s=.5\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ secondaryColor=\letteropenbrace{}s=.6\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ tertiaryColor=\letteropenbrace{}s=.7\letterclosebrace{},}/ETEX
/BTEX\NormalTok{]}/ETEX

/BTEX\CommentTok{\letterpercent{} Overriding the hader \letterslash{} footer info:}/ETEX

/BTEX\FunctionTok{\letterbackslash{}Pauta}\NormalTok{[}/ETEX
/BTEX\NormalTok{ infoLeft=\letteropenbrace{}An excercise in Visigothic script\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ infoRight=\letteropenbrace{}from an Spanish manuscript, VII}\FunctionTok{\letterbackslash{}high}\NormalTok{\letteropenbrace{}th\letterclosebrace{} century\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ infoPosition=footer,}/ETEX
/BTEX\NormalTok{ displayNibs=true,}/ETEX
/BTEX\NormalTok{ displayAngleMarks=false,}/ETEX
/BTEX\NormalTok{ nibWidth=2mm,}/ETEX
/BTEX\NormalTok{ ascenders=4,}/ETEX
/BTEX\NormalTok{ xHeight=3,}/ETEX
/BTEX\NormalTok{ descenders=4,}/ETEX
/BTEX\NormalTok{ adjustment=1,}/ETEX
/BTEX\NormalTok{ mainColor=\letteropenbrace{}s=.3\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ secondaryColor=\letteropenbrace{}s=.4\letterclosebrace{},}/ETEX
/BTEX\NormalTok{ tertiaryColor=\letteropenbrace{}s=.5\letterclosebrace{},}/ETEX
/BTEX\NormalTok{]}/ETEX
/BTEX\FunctionTok{\letterbackslash{}stopdocument}/ETEX
\stophighlighting

This project aims to provide a flexible and efficient tool for creating calligraphy practice templates, leveraging the power of \CONTEXT~and \METAPOST.

\stopsubsection

\stopsection

\startsection[title={Changelog},reference={changelog}]

\startitemize[packed]
\item
  20240307: Added build script, first alpha version
\item
  20240308: Improved build script, TDS compliant branch created
\stopitemize

\stopsection

\stopchapter
